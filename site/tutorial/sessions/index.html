<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Sessions in JustPy - My Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">JustPy</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Blog <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../blog/ag-grid_to_web_page/" class="dropdown-item">From a Pandas DataFrame to a Web Site with an ag-Grid in 10 Lines of Python</a>
</li>
                                    
<li>
    <a href="../../blog/reactivity/" class="dropdown-item">Reactivity in JustPy</a>
</li>
                                    
<li>
    <a href="../../blog/vue_comparison/" class="dropdown-item">Comparing Vue.js to JustPy</a>
</li>
                                    
<li>
    <a href="../../blog/vue_examples/" class="dropdown-item">JustPy Implementation of Vue.js Examples</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Charts tutorial <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../charts_tutorial/chart_components/" class="dropdown-item">Chart Custom Components</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/chart_events/" class="dropdown-item">Chart Events and Methods</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/creating_charts/" class="dropdown-item">Creating Charts</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/introduction/" class="dropdown-item">Highcharts Introduction</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/iris/" class="dropdown-item">Iris Flower Dataset Visualization</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/pandas/" class="dropdown-item">Using Pandas to Create Charts</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/stock_charts/" class="dropdown-item">Stock Charts</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/tooltips/" class="dropdown-item">Tooltips</a>
</li>
                                    
<li>
    <a href="../../charts_tutorial/updating_charts/" class="dropdown-item">Updating Charts</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Grids tutorial <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../grids_tutorial/adding_html/" class="dropdown-item">Adding HTML to Cells</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/checkbox/" class="dropdown-item">Rendering Checkboxes</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/context_menu/" class="dropdown-item">Adding a Context Menu</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/creating_grids/" class="dropdown-item">Creating Grids</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/database/" class="dropdown-item">Displaying Database Tables and Query Results</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/field_evaluation/" class="dropdown-item">Evaluating Fields using JavaScript</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/grid_api/" class="dropdown-item">Running Grid API Commands</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/grid_events/" class="dropdown-item">Grid Events</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/introduction/" class="dropdown-item">ag-Grid Introduction</a>
</li>
                                    
<li>
    <a href="../../grids_tutorial/pandas/" class="dropdown-item">Using Pandas to Create Grids</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">How to <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../how_to/add_row_to_grid/" class="dropdown-item">How to Add a Row to a Grid</a>
</li>
                                    
<li>
    <a href="../../how_to/change_font/" class="dropdown-item">Using Specific Fonts</a>
</li>
                                    
<li>
    <a href="../../how_to/context_menu/" class="dropdown-item">Addiing a Context Menu (right-click in browser)</a>
</li>
                                    
<li>
    <a href="../../how_to/create_select/" class="dropdown-item">How to use the Select HTML Tag</a>
</li>
                                    
<li>
    <a href="../../how_to/login_decorator/" class="dropdown-item">Use Decorators for Request Handlers</a>
</li>
                                    
<li>
    <a href="../../how_to/monitor_idle/" class="dropdown-item">Monitor Inactivity</a>
</li>
                                    
<li>
    <a href="../../how_to/play_audio/" class="dropdown-item">How to Play Audio</a>
</li>
                                    
<li>
    <a href="../../how_to/quasar_full_screen/" class="dropdown-item">How ot Toggle Full Screen Mode in Quasar</a>
</li>
                                    
<li>
    <a href="../../how_to/reload_pages/" class="dropdown-item">Forcing a Hard Reload</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Meadows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../meadows/general/" class="dropdown-item">General Thoughts</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Quasar tutorial <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../quasar_tutorial/QAjaxBar/" class="dropdown-item">QAjaxBar</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QBtnToggle/" class="dropdown-item">QBtnToggle</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QColor/" class="dropdown-item">QColor</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QDate/" class="dropdown-item">QDate and QTime</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QDialog/" class="dropdown-item">QDialog</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QExpansionItem/" class="dropdown-item">QExpansionItem Examples</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QInput/" class="dropdown-item">QInput</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QList/" class="dropdown-item">QList and QItem</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QOptionGroup/" class="dropdown-item">QOptionGroup</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QRating/" class="dropdown-item">QRating</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QSplitter/" class="dropdown-item">QSplitter</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/QTree/" class="dropdown-item">QTree</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/introduction/" class="dropdown-item">Quasar Introduction</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/not_working/" class="dropdown-item">Components not Working</a>
</li>
                                    
<li>
    <a href="../../quasar_tutorial/notify/" class="dropdown-item">Notifications</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../reference/configuration/" class="dropdown-item">Configuration Variables</a>
</li>
                                    
<li>
    <a href="../../reference/htmlcomponent/" class="dropdown-item">HTML Components</a>
</li>
                                    
<li>
    <a href="../../reference/justpy/" class="dropdown-item">The **justpy** Command</a>
</li>
                                    
<li>
    <a href="../../reference/notes/" class="dropdown-item">Notes</a>
</li>
                                    
<li>
    <a href="../../reference/webpage/" class="dropdown-item">The WebPage Class</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorial <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../advanced_components/" class="dropdown-item">Advanced Components</a>
</li>
                                    
<li>
    <a href="../ajax/" class="dropdown-item">Using Ajax instead of WebSockets</a>
</li>
                                    
<li>
    <a href="../altair/" class="dropdown-item">Altair Charts</a>
</li>
                                    
<li>
    <a href="../basic_concepts/" class="dropdown-item">The Basic Concepts</a>
</li>
                                    
<li>
    <a href="../before_after_events/" class="dropdown-item">The <span style="color: red">before</span> and <span style="color: red">after</span> Events</a>
</li>
                                    
<li>
    <a href="../bokeh/" class="dropdown-item">Bokeh Charts</a>
</li>
                                    
<li>
    <a href="../configuration/" class="dropdown-item">Configuration</a>
</li>
                                    
<li>
    <a href="../custom_components/" class="dropdown-item">Creating Your Own Components</a>
</li>
                                    
<li>
    <a href="../deployment/" class="dropdown-item">Deployment</a>
</li>
                                    
<li>
    <a href="../drag_and_drop/" class="dropdown-item">Drag and Drop</a>
</li>
                                    
<li>
    <a href="../equations/" class="dropdown-item">Equations</a>
</li>
                                    
<li>
    <a href="../form/" class="dropdown-item">Form Component</a>
</li>
                                    
<li>
    <a href="../getting_started/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../handling_events/" class="dropdown-item">Handling Events</a>
</li>
                                    
<li>
    <a href="../html_components/" class="dropdown-item">HTML Components</a>
</li>
                                    
<li>
    <a href="../input/" class="dropdown-item">Input Component</a>
</li>
                                    
<li>
    <a href="../markdown/" class="dropdown-item">Using Markdown</a>
</li>
                                    
<li>
    <a href="../matplotlib/" class="dropdown-item">Creating matplotlib Charts</a>
</li>
                                    
<li>
    <a href="../model_and_data/" class="dropdown-item">The model and data Attributes</a>
</li>
                                    
<li>
    <a href="../page_events/" class="dropdown-item">Page Events</a>
</li>
                                    
<li>
    <a href="../plotly/" class="dropdown-item">Plotly Charts</a>
</li>
                                    
<li>
    <a href="../pushing_data/" class="dropdown-item">Pushing Data to Web Pages</a>
</li>
                                    
<li>
    <a href="../pydeck/" class="dropdown-item">Pydeck Visualizations</a>
</li>
                                    
<li>
    <a href="../request_object/" class="dropdown-item">The Request Object</a>
</li>
                                    
<li>
    <a href="../routes/" class="dropdown-item">Routes</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Sessions in JustPy</a>
</li>
                                    
<li>
    <a href="../static/" class="dropdown-item">Static Files</a>
</li>
                                    
<li>
    <a href="../svg_components/" class="dropdown-item">SVG Components</a>
</li>
                                    
<li>
    <a href="../tailwind/" class="dropdown-item">Tailwind</a>
</li>
                                    
<li>
    <a href="../transitions/" class="dropdown-item">Transitions</a>
</li>
                                    
<li>
    <a href="../uploading_files/" class="dropdown-item">Downloading and Uploading Files</a>
</li>
                                    
<li>
    <a href="../working_with_html/" class="dropdown-item">Parsing and Using HTML</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../routes/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../static/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#sessions-in-justpy" class="nav-link">Sessions in JustPy</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#simple-example" class="nav-link">Simple Example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#login-example" class="nav-link">Login Example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="sessions-in-justpy">Sessions in JustPy</h1>
<h2 id="introduction">Introduction</h2>
<p>JustPy supports secure, server based sessions.</p>
<p>Sessions are supported by default. If you want to disable them, add the line:</p>
<pre><code class="language-python">SESSIONS = False
</code></pre>
<p>to the configuration file, justpy.env</p>
<p>In the configuration file. You can also set the name of the cookie JustPy will use by setting the value of
<code>SESSION_COOKIE_NAME</code>. The default value is 'jp_token'. The max age of the cookie in seconds is set using <code>COOKIE_MAX_AGE</code>, default is 7 days.</p>
<p>Your justpy.env file could include for example:</p>
<pre><code class="language-python">SESSIONS = True
SESSION_COOKIE_NAME = &quot;my_cookie_name&quot;
COOKIE_MAX_AGE = 108000
SECRET_KEY = &quot;my_very_secret_key_that_only_I_know&quot;
</code></pre>
<p>When a request is received and sessions are enabled, JustPy checks if a session cookie already exits. If not, a new unique session id is generated (using <a href="https://docs.python.org/3/library/uuid.html">uuid4</a>).</p>
<p>The value of the JustPy cookie is signed using the python package <a href="https://palletsprojects.com/p/itsdangerous/"><code>itsdangerous</code></a>.  In order to do so, a secret key needs to be provided. Set the secret key by setting the value of <code>SECRET_KEY</code> in the configuration file justpy.env. JustPy comes with a default value ("$$$my_secret_string$$$") but be sure to change this for production. </p>
<p>The advantage of signing the cookie is that cookie tampering  can be detected. If JustPy detects that the cookie was tampered with, a  <strong>Bad Cookie</strong> response is returned to the browser. </p>
<p>!!! tip
    If you get a <strong>Bad Cookie</strong> response while testing you site, it may mean that you changed your secret key and your cookie is signed with the previous one. Just erase the cookie in your browser and try again. </p>
<p>If the cookie is validated, the session inserts the session id into the <code>request</code> object as <code>request.session_id</code>.</p>
<p>!!! info
    The JustPy cookie <strong>ONLY</strong> holds the signed session id. There is no other information in the cookie.</p>
<p>!!! info
    The JustPy cookie is an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#Creating_cookies">HttpOnly</a> cookie and is inaccessible to JavaScript on the page.</p>
<h2 id="simple-example">Simple Example</h2>
<p>The session id can be used as an index or key to store information about a session. In the example below we define a dictionary called <code>session_dict</code> and hold the information there. If you need the session data to persist between
server restarts, you would use a permanent data store like a a shelve or database to hold session data.</p>
<p>In this example, for each session, a tally is kept of the number of visits and the number of clicks.
JustPy provides the session id as part of the information that event handlers receive. If the standard <code>msg</code> argument is used, then the session id can be found in <code>msg.session_id</code>.</p>
<pre><code class="language-python">import justpy as jp

session_dict = {}

def session_test(request):
   wp = jp.WebPage()
   if request.session_id not in session_dict:
        session_dict[request.session_id] = {'visits': 0, 'events': 0}
   session_data = session_dict[request.session_id]
   session_data['visits'] += 1
   jp.Div(text=f'My session id: {request.session_id}', classes='m-2 p-1 text-xl', a=wp)
   visits_div = jp.Div(text=f'Number of visits: {session_data[&quot;visits&quot;]}', classes='m-2 p-1 text-xl', a=wp)
   b = jp.Button(text=f'Number of Click Events: {session_data[&quot;events&quot;]}', classes='m-1 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full', a=wp)
   b.visits_div = visits_div

   def my_click(self, msg):
       session_data = session_dict[msg.session_id]
       session_data['events'] += 1
       self.text =f'Number of Click Events: {session_data[&quot;events&quot;]}'
       self.visits_div.text = f'Number of visits: {session_data[&quot;visits&quot;]}'

   b.on('click', my_click)
   return wp

jp.justpy(session_test)
</code></pre>
<p>Run the program above. Close, open and reload browser tabs and click the button. The session information persists.</p>
<h2 id="login-example">Login Example</h2>
<p>The example below shows how you could implement a very simple login/logout mechanism. </p>
<pre><code class="language-python">import justpy as jp
import asyncio

login_form_html = &quot;&quot;&quot;
&lt;div class=&quot;w-full max-w-xs&quot;&gt;
  &lt;form class=&quot;bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4&quot;&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;label class=&quot;block text-gray-700 text-sm font-bold mb-2&quot; for=&quot;username&quot;&gt;
        Username
      &lt;/label&gt;
      &lt;input class=&quot;shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline&quot;  type=&quot;text&quot; placeholder=&quot;Username&quot; name=&quot;user_name&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;mb-6&quot;&gt;
      &lt;label class=&quot;block text-gray-700 text-sm font-bold mb-2&quot; for=&quot;password&quot;&gt;
        Password
      &lt;/label&gt;
      &lt;input class=&quot;shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline&quot; name=&quot;password&quot; type=&quot;password&quot; placeholder=&quot;******************&quot;&gt;
      &lt;p class=&quot;text-red-500 text-xs italic&quot;&gt;The password is 'password'&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&quot;flex items-center justify-between&quot;&gt;
      &lt;button class=&quot;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline&quot; type=&quot;button&quot; name=&quot;sign_in_btn&quot;&gt;
        Sign In
      &lt;/button&gt;
    &lt;/div&gt;
  &lt;/form&gt;
  &lt;p class=&quot;text-center text-gray-500 text-xs&quot;&gt;
    Example from https://tailwindcss.com/components/forms
  &lt;/p&gt;
&lt;/div&gt;
&quot;&quot;&quot;

alert_html = &quot;&quot;&quot;
&lt;div role=&quot;alert&quot; class=&quot;m-1 p-1 w-1/3&quot;&gt;
  &lt;div class=&quot;bg-red-500 text-white font-bold rounded-t px-4 py-2&quot;&gt;
    Password is incorrect
  &lt;/div&gt;
  &lt;div class=&quot;border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700&quot;&gt;
    &lt;p&gt;Please enter password again.&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
&quot;&quot;&quot;

users = {}

async def login_test(request):
    wp = jp.WebPage()
    session_id = request.session_id
    if session_id in users:
        if users[session_id]['logged_in']:
            jp.Div(a=wp, text=f'Your session id is: {session_id}', classes='m-1 p-1 text-xl ')
            jp.Div(a=wp, text=f'You are already logged in...', classes='m-1 p-1 text-2l')
            log_out_btn = jp.Button(text='Logout', classes=jp.Styles.button_bordered + ' m-1 p-1', a=wp)
            log_out_btn.s_id = session_id

            def log_out(self, msg):
                users[self.s_id]['logged_in'] = False
                msg.page.redirect = '/login_test'

            log_out_btn.on('click', log_out)

            logged_in = True
        else:
            logged_in = False
    else:
        users[session_id] = {}
        users[session_id]['logged_in'] = False
        logged_in = False
    if not logged_in:
        return await login_page(request)  # Return different page if not logged in
    return wp

@jp.SetRoute('/login')
async def login_page(request):
    try:
        if users[request.session_id]['logged_in']:
            return await login_test(request)
    except:
        pass
    wp = jp.WebPage()
    wp.display_url = 'login_page'  # Sets the url to display in browser without reloading page
    jp.Div(text='Please login', a=wp, classes='m-2 p-2 w-1/4 text-xl font-semibold')
    login_form = jp.parse_html(login_form_html, a=wp, classes='m-2 p-2 w-1/4')
    alert = jp.parse_html(alert_html, show=False, a=wp)
    session_div = jp.Div(text='Session goes here', classes='m-1 p-1 text-xl', a=wp)
    sign_in_btn = login_form.name_dict['sign_in_btn']
    sign_in_btn.user_name = login_form.name_dict['user_name']
    sign_in_btn.session_id = request.session_id
    sign_in_btn.alert = alert

    async def sign_in_click(self, msg):
        if login_form.name_dict['password'].value == 'password':
            session_div.text = request.session_id + ' logged in successfully'
            self.alert.show = False
            return await login_successful(wp, request.session_id)
        else:
            session_div.text = request.session_id + ' login not successful'
            self.alert.show = True

    sign_in_btn.on('click', sign_in_click)

    return wp

async def login_successful(wp, s_id):
    wp.delete_components()
    users[s_id]['logged_in'] = True
    wp.display_url = 'login_successful'
    jp.Div(text='Login successful. You are now logged in', classes='m-1 p-1 text-2xl', a=wp)
    await wp.update()
    await asyncio.sleep(3)
    wp.redirect = '/login_test'


jp.justpy(login_test)

</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
